
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 675">
  <!-- 背景 -->
  <rect width="800" height="675" fill="#f8f9fa" />

  <!-- 标题 -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" font-weight="bold">检索增强生成（RAG）方法示意图</text>

  <!-- 用户查询/输入 -->
  <rect x="50" y="100" width="150" height="60" rx="10" ry="10" fill="#b3e0ff" stroke="#0066cc" stroke-width="2" />
  <text x="125" y="140" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">用户查询/输入</text>

  <!-- 从用户查询到嵌入模型的连接 -->
  <line x1="200" y1="130" x2="250" y2="130" stroke="#666" stroke-width="2" />

  <!-- 嵌入模型 -->
  <rect x="250" y="100" width="140" height="60" rx="10" ry="10" fill="#d9d2e9" stroke="#674ea7" stroke-width="2" />
  <text x="320" y="130" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">嵌入模型</text>
  <text x="320" y="150" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">查询向量化</text>

  <!-- 从嵌入模型到检索器的连接 -->
  <line x1="320" y1="160" x2="320" y2="200" stroke="#666" stroke-width="2" />

  <!-- 检索器 -->
  <rect x="250" y="200" width="140" height="70" rx="10" ry="10" fill="#fce5cd" stroke="#e69138" stroke-width="2" />
  <text x="320" y="225" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">检索器</text>
  <text x="320" y="245" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">相似度搜索</text>
  <text x="320" y="260" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">(向量数据库)</text>

  <!-- 知识库/文档存储 -->
  <rect x="50" y="200" width="150" height="110" rx="10" ry="10" fill="#d9ead3" stroke="#6aa84f" stroke-width="2" />
  <text x="125" y="230" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">知识库</text>
  <text x="125" y="250" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">文档存储</text>

  <!-- 知识库内部元素 -->
  <rect x="70" y="265" width="110" height="15" fill="#a4c2f4" stroke="#3c78d8" stroke-width="1" />
  <rect x="70" y="285" width="110" height="15" fill="#a4c2f4" stroke="#3c78d8" stroke-width="1" />

  <!-- 知识库到嵌入模型的连接（预处理阶段） -->
  <line x1="125" y1="200" x2="125" y2="180" stroke="#6aa84f" stroke-width="2" stroke-dasharray="5,5" />
  <line x1="125" y1="180" x2="250" y2="180" stroke="#6aa84f" stroke-width="2" stroke-dasharray="5,5" />
  <line x1="250" y1="180" x2="270" y2="160" stroke="#6aa84f" stroke-width="2" stroke-dasharray="5,5" />
  <text x="180" y="175" font-family="Arial, sans-serif" font-size="12" fill="#6aa84f">预处理阶段</text>

  <!-- 知识库到检索器的连接 -->
  <line x1="200" y1="235" x2="250" y2="235" stroke="#666" stroke-width="2" />

  <!-- 从检索器到检索结果的连接 -->
  <line x1="320" y1="270" x2="320" y2="300" stroke="#666" stroke-width="2" />

  <!-- 检索结果/上下文 -->
  <rect x="250" y="300" width="140" height="60" rx="10" ry="10" fill="#fff2cc" stroke="#f1c232" stroke-width="2" />
  <text x="320" y="330" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">检索结果</text>
  <text x="320" y="350" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">相关上下文</text>

  <!-- 从检索结果到上下文增强的连接 -->
  <line x1="320" y1="360" x2="320" y2="390" stroke="#666" stroke-width="2" />

  <!-- 上下文增强 -->
  <rect x="250" y="390" width="140" height="60" rx="10" ry="10" fill="#d5a6bd" stroke="#a64d79" stroke-width="2" />
  <text x="320" y="420" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">上下文增强</text>
  <text x="320" y="440" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">提示词工程</text>

  <!-- 从用户查询到上下文增强的连接 -->
  <line x1="125" y1="160" x2="125" y2="420" stroke="#0066cc" stroke-width="2" stroke-dasharray="5,5" />
  <line x1="125" y1="420" x2="250" y2="420" stroke="#0066cc" stroke-width="2" stroke-dasharray="5,5" />

  <!-- 从上下文增强到生成模型的连接 -->
  <line x1="390" y1="420" x2="450" y2="420" stroke="#666" stroke-width="2" />

  <!-- 生成模型 -->
  <rect x="450" y="390" width="170" height="70" rx="10" ry="10" fill="#c9daf8" stroke="#3d85c6" stroke-width="2" />
  <text x="535" y="415" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">生成模型</text>
  <text x="535" y="435" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">大型语言模型 (LLM)</text>
  <text x="535" y="450" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">基于增强上下文生成回答</text>

  <!-- 从生成模型到输出的连接 -->
  <line x1="620" y1="425" x2="670" y2="425" stroke="#666" stroke-width="2" />

  <!-- 输出/回答 -->
  <rect x="670" y="390" width="100" height="60" rx="10" ry="10" fill="#b3e0ff" stroke="#0066cc" stroke-width="2" />
  <text x="720" y="425" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">生成回答</text>

  <!-- 图例和说明 -->
  <rect x="50" y="480" width="700" height="140" rx="5" ry="5" fill="#f5f5f5" stroke="#cccccc" stroke-width="1" />
  <text x="400" y="510" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" font-weight="bold">RAG 工作原理</text>

  <text x="80" y="540" font-family="Arial, sans-serif" font-size="14">1. 将用户查询转换为向量表示</text>
  <text x="80" y="560" font-family="Arial, sans-serif" font-size="14">2. 从知识库中检索与查询相关的文档或段落（通过向量相似度搜索）</text>
  <text x="80" y="580" font-family="Arial, sans-serif" font-size="14">3. 将检索到的上下文与原始查询结合，构建增强提示</text>
  <text x="80" y="600" font-family="Arial, sans-serif" font-size="14">4. 使用大型语言模型基于增强上下文生成准确、知识丰富的回答</text>

  <!-- 许可声明 -->
  <text x="400" y="650" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">本作品采用 CC-BY-SA 4.0 国际许可协议进行许可，© 2025 Gitconomy Research社区</text>
</svg>
