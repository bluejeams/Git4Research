
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 610">
  <!-- 背景 -->
  <rect width="800" height="610" fill="#f8f9fa" />

  <!-- 标题 -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" font-weight="bold">混合专家 (Mixture of Experts) 架构示意图</text>

  <!-- 输入层 -->
  <rect x="100" y="100" width="120" height="60" rx="10" ry="10" fill="#b3e0ff" stroke="#0066cc" stroke-width="2" />
  <text x="160" y="140" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">输入向量 x</text>

  <!-- 输入到门控网络和专家网络的连接线 -->
  <line x1="220" y1="130" x2="300" y2="130" stroke="#666" stroke-width="2" />
  <line x1="260" y1="130" x2="260" y2="230" stroke="#666" stroke-width="2" />
  <line x1="260" y1="230" x2="300" y2="230" stroke="#666" stroke-width="2" />
  <line x1="260" y1="230" x2="260" y2="330" stroke="#666" stroke-width="2" />
  <line x1="260" y1="330" x2="300" y2="330" stroke="#666" stroke-width="2" />
  <line x1="260" y1="330" x2="260" y2="430" stroke="#666" stroke-width="2" />
  <line x1="260" y1="430" x2="300" y2="430" stroke="#666" stroke-width="2" />

  <!-- 门控网络 -->
  <rect x="300" y="100" width="150" height="60" rx="10" ry="10" fill="#ffcccc" stroke="#cc0000" stroke-width="2" />
  <text x="375" y="140" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">门控网络 G(x)</text>

  <!-- 专家网络 -->
  <rect x="300" y="200" width="150" height="60" rx="10" ry="10" fill="#d9f2d9" stroke="#006600" stroke-width="2" />
  <text x="375" y="225" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">专家 1</text>
  <text x="375" y="245" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">E₁(x)</text>

  <rect x="300" y="300" width="150" height="60" rx="10" ry="10" fill="#d9f2d9" stroke="#006600" stroke-width="2" />
  <text x="375" y="325" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">专家 2</text>
  <text x="375" y="345" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">E₂(x)</text>

  <rect x="300" y="400" width="150" height="60" rx="10" ry="10" fill="#d9f2d9" stroke="#006600" stroke-width="2" />
  <text x="375" y="425" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">专家 n</text>
  <text x="375" y="445" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">Eₙ(x)</text>

  <!-- 省略号表示有更多专家 -->
  <text x="375" y="380" font-family="Arial, sans-serif" font-size="24" text-anchor="middle">⋮</text>

  <!-- 从门控网络到专家的权重连接 -->
  <line x1="450" y1="130" x2="500" y2="130" stroke="#cc0000" stroke-width="2" stroke-dasharray="5,5" />
  <line x1="500" y1="130" x2="500" y2="230" stroke="#cc0000" stroke-width="2" stroke-dasharray="5,5" />
  <line x1="500" y1="230" x2="450" y2="230" stroke="#cc0000" stroke-width="2" stroke-dasharray="5,5" />

  <line x1="450" y1="130" x2="520" y2="130" stroke="#cc0000" stroke-width="2" stroke-dasharray="5,5" />
  <line x1="520" y1="130" x2="520" y2="330" stroke="#cc0000" stroke-width="2" stroke-dasharray="5,5" />
  <line x1="520" y1="330" x2="450" y2="330" stroke="#cc0000" stroke-width="2" stroke-dasharray="5,5" />

  <line x1="450" y1="130" x2="540" y2="130" stroke="#cc0000" stroke-width="2" stroke-dasharray="5,5" />
  <line x1="540" y1="130" x2="540" y2="430" stroke="#cc0000" stroke-width="2" stroke-dasharray="5,5" />
  <line x1="540" y1="430" x2="450" y2="430" stroke="#cc0000" stroke-width="2" stroke-dasharray="5,5" />

  <!-- 从专家到输出的连接 -->
  <line x1="450" y1="230" x2="600" y2="230" stroke="#006600" stroke-width="2" />
  <line x1="600" y1="230" x2="600" y2="300" stroke="#006600" stroke-width="2" />

  <line x1="450" y1="330" x2="580" y2="330" stroke="#006600" stroke-width="2" />
  <line x1="580" y1="330" x2="580" y2="300" stroke="#006600" stroke-width="2" />

  <line x1="450" y1="430" x2="560" y2="430" stroke="#006600" stroke-width="2" />
  <line x1="560" y1="430" x2="560" y2="300" stroke="#006600" stroke-width="2" />

  <!-- 加权求和 -->
  <circle cx="580" cy="300" r="40" fill="#e6e6ff" stroke="#000099" stroke-width="2" />
  <text x="580" y="290" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">加权</text>
  <text x="580" y="310" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">求和</text>

  <!-- 输出 -->
  <rect x="650" y="270" width="120" height="60" rx="10" ry="10" fill="#b3e0ff" stroke="#0066cc" stroke-width="2" />
  <text x="710" y="310" font-family="Arial, sans-serif" font-size="18" text-anchor="middle">输出 y</text>

  <!-- 输出连接 -->
  <line x1="620" y1="300" x2="650" y2="300" stroke="#666" stroke-width="2" />

  <!-- 公式说明 -->
  <rect x="100" y="480" width="600" height="30" rx="5" ry="5" fill="#ffffcc" stroke="#cccc00" stroke-width="2" />
  <text x="400" y="500" font-family="Arial, sans-serif" font-size="16" text-anchor="middle">MoE 输出: y = ∑(G(x)ᵢ · Eᵢ(x)), 其中 G(x)ᵢ 是第 i 个专家的权重</text>

  <!-- 框图说明 -->
  <rect x="100" y="520" width="280" height="25" fill="#ffcccc" stroke="#cc0000" stroke-width="1" />
  <text x="240" y="537" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">门控网络: 决定每个专家的权重</text>

  <rect x="400" y="520" width="300" height="25" fill="#d9f2d9" stroke="#006600" stroke-width="1" />
  <text x="550" y="537" font-family="Arial, sans-serif" font-size="14" text-anchor="middle">专家网络: 各自处理输入并生成输出</text>

  <!-- 许可声明 -->
  <text x="400" y="585" font-family="Arial, sans-serif" font-size="12" text-anchor="middle">本作品采用 CC-BY-SA 4.0 国际许可协议进行许可，© 2025 Gitconomy Research社区</text>
</svg>
